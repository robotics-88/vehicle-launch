<launch>
    <arg name="enable_autonomy" default="false"/>
    <arg name="enable_exploration" default="false"/>

    <include file="$(find vehicle_launch)/launch/apm.launch"/>

    <arg name="cloud_topic" default="/velodyne_points"/>
    <arg name="reg_cloud_topic" default="/cloud_registered"/>
    <arg name="octomap_res" default="0.2"/> <!-- meter -->
    <arg name="rviz" default="false"/>

    <node pkg="rosservice" type="rosservice" name="rosservice" args="call --wait /mavros/set_stream_rate 0 10 1"/>

    <include file="$(find explore_uav)/launch/explore.launch"/>

    <include file="$(find monarch)/launch/monarch.launch">
        <arg name="enable_autonomy" value="$(arg enable_autonomy)"/>
        <arg name="enable_exploration" value="$(arg enable_exploration)"/>
    </include>
    
    <include file="$(find vehicle_launch)/launch/velo16.launch"/>

    <!-- <include file="$(find aloam_velodyne)/launch/aloam_velodyne_VLP_16.launch">
        <arg name="map_frame" value="map"/>
        <arg name="uav_frame" value="base_link"/>
        <arg name="rviz" value="false"/>
        <arg name="cloud_topic" value="$(arg cloud_topic)"/>
    </include> -->

    <include file="$(find vehicle_launch)/launch/oa_dynobs.launch">
        <arg name="raw_cloud_topic" value="$(arg cloud_topic)"/>
        <arg name="reg_cloud_topic" value="$(arg reg_cloud_topic)"/>
    </include>

    <include file="$(find octomap_slice)/launch/octomap_full_handling.launch">
        <arg name="cloud_topic" value="$(arg reg_cloud_topic)"/>
        <arg name="octomap_res" value="$(arg octomap_res)"/>
        <arg name="rviz" value="$(arg rviz)"/>
    </include>

    <arg name="use_mapir" default="true"/>
    <arg name="use_attollo" default="false"/>
    <arg name="ir_fps" default="15"/>
    <group if="$(arg use_mapir)">
        <include file="$(find vehicle_launch)/launch/mapir_rgn.launch">
            <arg name="fps" value="$(arg ir_fps)"/>
        </include>
        <include file="$(find vehicle_launch)/launch/static_tf.launch"/>
    </group>

</launch>